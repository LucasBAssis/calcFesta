<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>
    CalcFestas
  </title>
  <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,600,700,800" rel="stylesheet" />
  <link href="https://use.fontawesome.com/releases/v5.0.6/css/all.css" rel="stylesheet">
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/black-dashboard.css?v=1.0.0" rel="stylesheet" />
  <link href="../assets/demo/demo.css" rel="stylesheet" />
</head>

<body class="">
    <div class="modal" id="myModalCtt" tabIndex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="margin-top:75px">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" style="color: black;">Adicionar contato</h4>
              <button id="closeModal" type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body" id="cadastrarctt">
              <div class="form-group">
                <label class="control-label" style="color: black;">Nome contato:</label><br>
                <input style="border: 1px solid #cad1d7;color: black;" name="nome_ctt" type="text" class="form-control" id="nome_ctt" required>
              </div>
              <div class="form-group">
                <label class="control-label" style="color: black;">Descricao contato:</label><br>
                <input style="border: 1px solid #cad1d7; color: black;" name="desc_ctt" type="text" class="form-control" id="desc_ctt" required>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-success" style="background-color: #de4ecc!important" id="btn_salvarctt">Salvar</button>
              </div>
            </div>
          </div>
        </div>
      </div>
  <div class="wrapper">
    <div class="sidebar">
      <div class="sidebar-wrapper">
        <div class="logo">
          <a href="javascript:void(0)" class="simple-text logo-normal">
            CalcFestas
          </a>
        </div>
        <ul class="nav">
          <li class="active ">
            <a href="./dashboard.html">
              <i class="tim-icons icon-chart-pie-36"></i>
              <p>Planeje sua festa</p>
            </a>
          </li>
          <li>
            <a href="./explorar.html">
              <i class="tim-icons icon-planet"></i>
              <p>Calculadoras</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-absolute navbar-transparent">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <div class="navbar-toggle d-inline">
              <button type="button" class="navbar-toggler">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
              </button>
            </div>
            <a class="navbar-brand" href="javascript:void(0)">CalcFestas</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
          </button>
          <div class="collapse navbar-collapse" id="navigation">
            <ul class="navbar-nav ml-auto">

              <li class="dropdown nav-item">
                <a href="#" class="dropdown-toggle nav-link" data-toggle="dropdown">
                  <div class="photo">
                    <img src="../assets/img/anime3.png" alt="Profile Photo">
                  </div>
                  <b class="caret d-none d-lg-block d-xl-block"></b>
                  <p class="d-lg-none">
                    Log out
                  </p>
                </a>
                <ul class="dropdown-menu dropdown-navbar">
                  
                  <li class="dropdown-divider"></li>
                  <li class="nav-link">
                    <a href="../index.html" class="nav-item dropdown-item">Log out</a>
                  </li>
                </ul>
              </li>
              <li class="separator d-lg-none"></li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->
      <div class="content">
        <div class="row">
          <div class="col-md-6" id="calculadora">
            <div class="card card-tasks" style="height: 450px!important;">
              <div class="card-header ">
                <h4 class="title d-inline">Calculadora</h4>
                <hr>
              </div>
              <div class="card-body ">
                <div class="table-full-width table-responsive">
                  <div class="table">
                    <form>
                      <div class="row" id="listaInfo">
                        <div class="col-md-3 px-md-3">
                          <div class="form-group" style="display: flex;">
                            <label>Convidados</label>
                            <input type="number" id="inpConvidados" class="form-control convidadosInfo" style="margin-left: 15px;width: 200px;" required>
                          </div>
                        </div>
                      </div>
                      <div id="listaComida">
                        <hr>
                        <h6 class="title d-inline">Aperitivos</h6>
                        <br>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="cSalgadinho" name="Salgadinho (unidades)"
                                  value="15">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Salgadinho</label>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="cChips" name="Chips (pc pequeno)" value="15">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Chips</label>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="cPizza" name="Pizza (pedaço)" value="1">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Pizza (pedaço)</label>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="cBatataFrita" name="Batata Frita (pc pequeno)"
                                  value="15">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Batata Frita</label>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="cHotDog" name="Hot Dog (unidades)" value="1">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Hot Dog</label>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="cHamburguer" name="Hamburguer (unidades)"
                                  value="1">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Hamburguer</label>
                            </div>
                          </div>
                        </div>
                        <hr>
                        <h6 class="title d-inline">Doces</h6>
                        <br>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="dBala" name="Bala (unidades)" value="5">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Bala</label>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="dPirulito" name="Pirulito (unidades)"
                                  value="5">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Pirulito</label>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="dSorvete" name="Sorvete (bola)" value="1">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Sorvete</label>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="dDocinho" name="Docinho (unidades)" value="5">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Docinho</label>
                            </div>
                          </div>
                        </div>
                        <hr>
                        <h6 class="title d-inline">Bebidas sem alcool</h6>
                        <br>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="bAgua" name="Água (litro)" value="400">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Água</label>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="bRefrigerante" name="Refrigerante (litro)"
                                  value="400">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Refrigerante</label>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="bSuco" name="Suco (litro)" value="400">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Suco</label>
                            </div>
                          </div>
                        </div>
                        <hr>
                        <h6 class="title d-inline">Bebidas alcoolicas</h6>
                        <br>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="aCerveja" name="Cerveja (litro)"
                                  value="200">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Cerveja</label>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="aVodka" name="Vodka (litro)" value="200">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Vodka</label>
                            </div>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="aTequila" name="Tequila (litro)"
                                  value="200">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Tequila</label>
                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-check">
                              <label class="form-check-label">
                                <input class="form-check-input" type="checkbox" id="aVinho" name="Vinho (litro)" value="200">
                                <span class="form-check-sign">
                                  <span class="check"></span>
                                </span>
                              </label>
                              <label>Vinho</label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </form>
                    <div class="card-footer">
                      <button type="submit" class="btn btn-fill btn-primary" id="salvarCalc">Salvar</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6" id="calculadoraResultado" style="display: none;">
            <div class="card card-tasks" style="height: 450px!important;">
              <div class="card-header">
                <h4 class="card-title">Resultado</h4>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table tablesorter " id="">
                    <thead class=" text-primary">
                      <tr>
                        <th>Produto</th>
                        <th>Quantidade</th>
                      </tr>
                    </thead>
                    <tbody id="resultadoCalculadora">

                    </tbody>
                  </table>
                  <div class="row">
                    <div class="card-footer">
                        <button type="submit" class="btn btn-fill btn-primary" id="voltarCalc">Voltar</button>
                      </div>
                    <div class="card-footer">
                      <button type="submit" class="btn btn-fill btn-primary" id="guardarResult">Guardar</button>
                    </div>
                </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6" id="myRede">
            <div class="card card-tasks" style="height: 450px!important;">
              <div class="card-header">
                <h4 class="title d-inline">Minha rede</h4>
                <div class="form-check">
                  <label class="form-check-label">
                    <p id="pHabilitar">Habilitar lista</p>
                    <input class="form-check-input" type="checkbox" id="inpHabilitarLista" value="1">
                    <span class="form-check-sign">
                      <span class="check"></span>
                    </span>
                  </label>
                  <button type="submit" class="addCtt btn btn-fill btn-primary" id="addCtt" style="width: 97px; height: 31px;font-size: 9px; padding-left: 7px;">Adicionar contato</button>
                </div>
                <hr>
              </div>
              <div class="card-body chbListaConvidados">
                <div class="table-full-width table-responsive">
                  <div class="table" id="lista-de-contatos">                    
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <footer class="footer"></footer>
    </div>
  </div>

  <script src="../assets/js/core/jquery.min.js"></script>
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.jquery.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
  <script src="../assets/js/plugins/chartjs.min.js"></script>
  <script src="../assets/js/plugins/bootstrap-notify.js"></script>
  <script src="../assets/js/black-dashboard.min.js?v=1.0.0"></script>
  <script src="../assets/demo/demo.js"></script>
  <script src="../js/fakedbCalc.js"></script>
  <script src="../js/fakedbCtt.js"></script>
  <script>
    $(document).ready(function () {
      $().ready(function () {
        $sidebar = $('.sidebar');
        $navbar = $('.navbar');
        $main_panel = $('.main-panel');

        $full_page = $('.full-page');

        $sidebar_responsive = $('body > .navbar-collapse');
        sidebar_mini_active = true;
        white_color = false;

        window_width = $(window).width();

        fixed_plugin_open = $('.sidebar .sidebar-wrapper .nav li.active a p').html();



        $('.fixed-plugin a').click(function (event) {
          if ($(this).hasClass('switch-trigger')) {
            if (event.stopPropagation) {
              event.stopPropagation();
            } else if (window.event) {
              window.event.cancelBubble = true;
            }
          }
        });

        $('.fixed-plugin .background-color span').click(function () {
          $(this).siblings().removeClass('active');
          $(this).addClass('active');

          var new_color = $(this).data('color');

          if ($sidebar.length != 0) {
            $sidebar.attr('data', new_color);
          }

          if ($main_panel.length != 0) {
            $main_panel.attr('data', new_color);
          }

          if ($full_page.length != 0) {
            $full_page.attr('filter-color', new_color);
          }

          if ($sidebar_responsive.length != 0) {
            $sidebar_responsive.attr('data', new_color);
          }
        });

        $('.switch-sidebar-mini input').on("switchChange.bootstrapSwitch", function () {
          var $btn = $(this);

          if (sidebar_mini_active == true) {
            $('body').removeClass('sidebar-mini');
            sidebar_mini_active = false;
            blackDashboard.showSidebarMessage('Sidebar mini deactivated...');
          } else {
            $('body').addClass('sidebar-mini');
            sidebar_mini_active = true;
            blackDashboard.showSidebarMessage('Sidebar mini activated...');
          }

          var simulateWindowResize = setInterval(function () {
            window.dispatchEvent(new Event('resize'));
          }, 180);

          setTimeout(function () {
            clearInterval(simulateWindowResize);
          }, 1000);
        });

        $('.switch-change-color input').on("switchChange.bootstrapSwitch", function () {
          var $btn = $(this);

          if (white_color == true) {

            $('body').addClass('change-background');
            setTimeout(function () {
              $('body').removeClass('change-background');
              $('body').removeClass('white-content');
            }, 900);
            white_color = false;
          } else {

            $('body').addClass('change-background');
            setTimeout(function () {
              $('body').removeClass('change-background');
              $('body').addClass('white-content');
            }, 900);

            white_color = true;
          }


        });

        $('.light-badge').click(function () {
          $('body').addClass('white-content');
        });

        $('.dark-badge').click(function () {
          $('body').removeClass('white-content');
        });
      });
    });
  </script>
  <script>
    $(document).ready(function () {
      demo.initDashboardPageCharts()

    });
  </script>
  <script>
    var saidaResultadoCtt = document.getElementById("lista-de-contatos")
    var HTMLItemCtt = ''
    var listaMarcados = document.getElementById("listaComida").getElementsByTagName("INPUT")
    var listaInfo = document.getElementById("listaInfo").getElementsByTagName("INPUT")
    var cont = 0
    var calcProd 
    var calcQtd 
    calcProd = new Array
    calcQtd = new Array
    exibeCtt();

    $("#calculadora").show();
    $('#salvarCalc').click(function () {
      let convidados = document.getElementById("inpConvidados").value
      //let checkLista = document.getElementById("inpHabilitarLista").value;

      if(cont != 0) {
        convidados = cont;
      }

      if(convidados != '' || convidados != 0) {
        console.log('entrou no if');
        $("#calculadora").hide()
        var saidaResultado = document.getElementById("resultadoCalculadora")
        var i, HTMLItem = '', produto, qtd
        for (i = 0; i < listaMarcados.length; i++) {

          if (listaMarcados[i].type == "checkbox" && listaMarcados[i].checked) {
            produto = listaMarcados[i].name
            calcProd[i] = produto
            qtd = listaMarcados[i].value * convidados
            calcQtd[i] = qtd

            HTMLItem += `<tr>
                      <td>${produto}</td>
                      <td>${qtd}</td>
                    </tr>`;
          }
        }
      if(produto == null){
        alert("Por favor, selecionar pelo menos uma opcao no checkbox para podermos ajuda-lo :)")
        $("#calculadora").show()
      } else {
        $('#resultadoCalculadora').empty()
        saidaResultado.insertAdjacentHTML("beforeend", HTMLItem)
        $("#calculadoraResultado").show()
      }
      }else{
        alert("Insira a quantidade de convidados");
      }
        
      })
    $('#voltarCalc').click(function(){
      $("#calculadora").show();
      $("#calculadoraResultado").hide();
    })
    $('#guardarResult').click(function () {
      let campoProduto = calcProd;
      let campoQtd = calcQtd;
      let calc = { produto: campoProduto, qtd: campoQtd };
      insertCalc(calc);

      $("#calculadora").show();
      $("#calculadoraResultado").hide();
      alert("Resultado guardado em 'calculadoras' ;)");
    })    
    
    $("#myModalCtt").hide();
    $("#addCtt").click(function () {
      $("#myModalCtt").show();
    })
    $("#btn_salvarctt").click(function () {
      let campoNome = document.getElementById("nome_ctt").value
      let campoDesc = document.getElementById("desc_ctt").value
      let Ctt = { nome: campoNome, desc: campoDesc };

      insertCtt(Ctt);
      document.location.reload(true);
      $("#myModalCtt").hide();
    })
    $("#inpHabilitarLista").click(function() {
      var habilitar = document.getElementById("inpHabilitarLista")
      if(habilitar.checked){
        cont = 0
        $('#pHabilitar').empty();
        document.getElementById("pHabilitar").insertAdjacentHTML("beforeend", "Desabilitar lista")
        $(".habilitarInput").prop('disabled', false);
        $(listaInfo).empty();
        $(listaInfo).prop('disabled', true);
        $(listaInfo["convidados"]).val($('#pHabilitar:checked').length) 
      }else{
        $('#pHabilitar').empty();
        document.getElementById("pHabilitar").insertAdjacentHTML("beforeend", "Habilitar lista")
        $(".habilitarInput").prop('checked', false);
        $(".habilitarInput").prop('disabled', true); 
        $(listaInfo).prop('disabled', false);
      }
    })
    $(".habilitarInput").click(function() {
      console.log("clicou no checkbox");
      var contaInput = document.getElementById("inputRedesChecar");
      if(contaInput.checked){
        console.log('entrou no if');
        cont = cont+1
        console.log(cont);
      }else{
        console.log('entrou no else');
        cont = cont-1
      }
      $(listaInfo["convidados"]).val(cont)
      $(".convidadosInfo").css("color", "white")
    })
     
    
    function exibeCtt() {
      var HTMLItemCtt = '';
      for (i = 0; i < dbCtt.data.length; i++) {
              let cttDados = dbCtt.data[i];
              if(!HTMLItemCtt.includes(cttDados.nome)) {
                HTMLItemCtt += `
                  <div class="row">
                      <div class="col-md-1">
                        <div class="form-check">
                          <label class="form-check-label">
                          <input class="form-check-input habilitarInput" id="inputRedesChecar" type="checkbox" id="convidado" value="1" disabled>
                            <span class="form-check-sign">
                              <span class="check"></span>
                            </span>
                          </label>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="photo">
                          <img src="../assets/img/anime3.png" alt="Profile Photo" width="50" height="50">
                        </div>
                      </div>
                      <div class="col-md-5">
                        <h6>${cttDados.nome}</h6>
                        <p>${cttDados.desc}</p>
                      </div>
                    </div>
                    <hr>
                `;
              }
                // saidaResultadoCtt.insertAdjacentHTML("beforeend", HTMLItemCtt)
            }
            saidaResultadoCtt.innerHTML = HTMLItemCtt
        }

  </script>
</body>

</html>